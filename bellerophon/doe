#!/bin/bash

set -x
FOLDER_NAME=$1

if [[ -z $FOLDER_NAME ]]; then
    echo "Pass an experiment name as an argument"
    exit 1
fi

RUN_NUMBER=0
mkdir -p $HOME/DOE/$FOLDER_NAME

./launch_bellerophon --popSize=60 --error=0.15 --pmut=0.3 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=100 --error=0.15 --pmut=0.3 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=350 --error=0.15 --pmut=0.3 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=1000 --error=0.15 --pmut=0.3 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))

./launch_bellerophon --popSize=60 --error=0.15 --pmut=0.6 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=100 --error=0.15 --pmut=0.6 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=350 --error=0.15 --pmut=0.6 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=1000 --error=0.15 --pmut=0.6 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt
((RUN_NUMBER++))

./launch_bellerophon --popSize=60 --error=0.15 --pCross=0.7 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=100 --error=0.15 --pCross=0.7 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=350 --error=0.15 --pCross=0.7 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=1000 --error=0.15 --pCross=0.7 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt

./launch_bellerophon --popSize=60 --error=0.10 --maxGen=10 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=100 --error=0.10 --maxGen=10 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=350 --error=0.10 --maxGen=10 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=1000 --error=0.10 --maxGen=10 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt
((RUN_NUMBER++))

./launch_bellerophon --popSize=60 --error=0.10 --pmut=0.6 --pCross=0.6 --maxGen=4 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=100 --error=0.10 --pmut=0.6 --pCross=0.6 --maxGen=4 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=350 --error=0.10 --pmut=0.6 --pCross=0.6 --maxGen=4 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt 
((RUN_NUMBER++))
./launch_bellerophon --popSize=1000 --error=0.10 --pmut=0.6 --pCross=0.6 --maxGen=4 --output=$HOME/DOE/$FOLDER_NAME/prova_$RUN_NUMBER.txt
((RUN_NUMBER++))

cd $HOME/DOE
tar -zcvf bellero_$FOLDER_NAME.tar.gz $FOLDER_NAME
echo "Lo script di Bellerofonte Ã¨ terminato." | mail -s "Bellerofonte" "andrea.aletto8@gmail.com" -A bellero_$FOLDER_NAME.tar.gz